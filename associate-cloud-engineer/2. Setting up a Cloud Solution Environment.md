## 1. Overview

- Module này giới thiệu **phạm vi các nhiệm vụ khi thiết lập môi trường cloud solution**, tương ứng **Section 1** trong ACE Exam Guide.
- Trình tự học:
  1. Thảo luận các **yếu tố cần cân nhắc** khi thiết lập môi trường cloud cho **Cymbal Superstore**.
  2. Làm **8 câu hỏi chẩn đoán** để tự đánh giá kỹ năng ở phần này.
  3. **Review** lại các câu hỏi/đáp án.

---

## 2. Setting up cloud environment cho Cymbal Superstore

### 2.1 Bối cảnh & mục tiêu giai đoạn

- Cymbal Superstore bắt đầu triển khai **hạ tầng cloud cơ bản**.
- Bạn (ACE) tham gia giai đoạn **setup cloud environment**.
- Nhóm bắt đầu bằng **planning meeting** để quyết định cách tổ chức **cloud structure**.

### 2.2 Các đầu việc chính của giai đoạn setup

- Thiết lập **resource hierarchy** (cấu trúc tài nguyên).
- Áp dụng **organizational policies**.
- Quản lý **projects** và **quotas**.
- Quản lý **users** và **groups**.
- Thiết lập **access management (IAM)**.
- Thiết lập **billing** và **monitoring** việc sử dụng tài nguyên.

### 2.3 Thiết kế resource hierarchy theo nhu cầu tổ chức

- Cách tổ chức hierarchy phụ thuộc vào **cấu trúc và nhu cầu** của doanh nghiệp.
- Cymbal Superstore migrate 3 ứng dụng lên cloud:
  - **Supply chain** chạy trên **VMs** (Compute Engine)
  - **E-commerce** dạng container chạy trên **GKE**
  - **Transportation management** dùng **Cloud Run (functions)** để theo dõi vị trí xe tải
- 3 ứng dụng tương ứng 3 phòng ban:
  - **Operations**: B2B supply chain
  - **Logistics**: transportation
  - **Sales & Marketing**: e-commerce

#### Ví dụ hierarchy (theo mô tả)

![Cymbal Supperstore's resource hierarchy](./2.1-Cymbal%20Supperstore's%20resource%20hierarchy.png)

- **Organization** (Cymbal Superstore) ở trên cùng
- (Tùy chọn) **Folders** bên dưới theo:
  - Division/phòng ban
  - Ứng dụng
- Bên dưới folder ứng dụng có nhiều **Projects**
  - Ví dụ B2B supply chain có các project theo môi trường CI/CD:
    - **dev**
    - **staging**
    - **production**
- Các ứng dụng khác có cấu trúc project tương tự.

### 2.4 Organizational policies & chia sẻ dữ liệu giữa phòng ban

- Khi thiết kế hierarchy cần kèm theo **policies** để kiểm soát truy cập.
- Ví dụ:
  - Marketing cần xem dữ liệu supply chain để đánh giá ảnh hưởng tồn kho tới chiến dịch.
  - Có thể cấp cho Marketing quyền **Viewer** trên **production environment** của supply chain để đáp ứng nhu cầu đọc dữ liệu.

### 2.5 Bật API services trong Project

- ACE có thể được giao nhiệm vụ **enable APIs** trong các project.
- Ví dụ e-commerce project cần:
  - **Google Kubernetes Engine API**
  - **Cloud SQL API** (database backend)

### 2.6 IAM: cấp quyền theo nhóm (groups) thay vì từng người

- Setup môi trường cloud bao gồm việc cấp **IAM roles** phù hợp cho từng đối tượng theo nhu cầu công việc.

#### Ví dụ: Data Analysts (Marketing) cần truy cập dữ liệu sales lịch sử

- Đây là use case phù hợp cho **BigQuery** (data warehouse).
- Cách cấp quyền:
  1. Thêm nhân sự mới vào nhóm **data_analyst group**
  2. Cấp quyền theo **group level** để dễ quản trị hơn user lẻ
  3. Quyền cần thiết:
     - Truy cập dữ liệu dataset/table: **bigquery.dataViewer**
     - Chạy query cần quyền tạo job: **bigquery.jobs.create**
       - Quyền này có trong predefined role **bigquery.user**
  4. Gán các role này cho **data_analyst group** tại đúng phạm vi (ví dụ trong **Production project**)

### 2.7 Quản lý users & groups bằng Cloud Identity

- Cloud engineer cần biết cách quản lý users/groups trong **Cloud Identity**
  - Dùng khi tổ chức **không quản lý qua Google Workspace**.

### 2.8 Observability: giám sát metrics & logs đa dự án

- **Google Cloud Observability** (tên cũ: Operations suite / Stackdriver) cung cấp:
  - **metrics**
  - **logging**
  - cho services, resources, projects trong kiến trúc cloud.
- Để theo dõi metrics từ **nhiều projects**, dùng **project scoping**.
  - Ví dụ: staging environment có 3 project (dev, staging, prod) cho supply chain
  - Chọn **staging** làm _scoping project_ và thêm **dev + production** làm _monitored projects_.

### 2.9 Billing: tách theo phòng ban + budgets/alerts + exports

- Khi migrate, một phần chi phí IT chuyển sang **operational expenses**.
- Mỗi phòng ban chịu trách nhiệm chi phí compute/storage cho ứng dụng của họ.
- Cần:
  - Tạo **billing account riêng** cho từng nhóm/phòng ban
  - Link mỗi **project** vào đúng billing account
- Ví dụ Sales & Marketing lo chi phí BigQuery:
  - Thiết lập **custom budgets** và **alerts** để kiểm soát chi phí
- Mỗi phòng ban cần **billing exports** để theo dõi và phân tích khoản charge.
